<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.height = -300;
for (var i = 0; i &lt; 3; i++) {
    heightOdo[i] = -global.height/power(10,i);
}
global.enemyList = ds_list_create();
ds_list_add(global.enemyList,obj_enemy1);
//ds_list_add(global.enemyList,obj_enemy2);

global.kill = 0;
killDisplay = 0;
killAnimation = 0;
playKillAnimation = false;
scoreDisplay = score;

for (var i = 0; i &lt; ALLY_LIMIT; i++) {
    allyHealthBarMove[i] = 0;
    allyHealthDisplay[i] = 0;
}

global.scoreFont = font_add_sprite_ext(spr_font_number,"x-0123456789",true,2);

display_set_gui_size(view_wport[0],view_hport[0]);
alarm[0] = 150;
alarm[1] = 90*60;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>alarm[0] = 20*60;
global.kill = 0;
alarm[1] = 110*60;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (numberOfEnemies() &lt; 10) {
    var spawnLocation = irandom(3);
    var enemy = ds_list_find_value(global.enemyList,irandom(ds_list_size(global.enemyList)-1));
    switch(spawnLocation) {
        case 0:
            var o = instance_create(room_width,irandom(room_height),enemy);
            o.direction = 180;
            break;
        case 1:
            var o = instance_create(irandom(room_width),0,enemy);
            o.direction = 270;
            break;
        case 2:
            var o = instance_create(0,irandom(room_height),enemy);
            o.direction = 0;
            break;
        case 3:
            var o = instance_create(irandom(room_width),room_height,enemy);
            o.direction = 90;
            break;
    }
}
alarm[0] = 150;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>background_vspeed[0] = max((global.height*0.01)+11,0.25);
global.height = clamp(global.height,-MAX_HEIGHT,-MIN_HEIGHT);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var xv = view_xview[0];
var yv = view_yview[0];
var wv = view_wport[0];
var hv = view_hport[0];
/*********** Altitude Odometer **********/
draw_sprite(spr_altitude_gui,0,wv,hv);
for (var i = 0; i &lt; 3; i++) {
    if (i == 0) {
        heightOdo[i] = var_wipe(heightOdo[i],floor(-global.height/power(10,i)),100,0.1,0);
    }
    else {
        heightOdo[i] = var_wipe(heightOdo[i],heightOdo[i-1] div 10,100,0.1,0);
    }
    draw_sprite_ext(spr_odometer,8+(heightOdo[i])*8,wv-21-(i*21),hv-27-12,3,3,0,white,1);
}
/*********** Radar **********/
var enemiesAbove = numberOfEnemies("above");
var enemiesBelow = numberOfEnemies("below");
var enemiesAt = numberOfEnemies("at");
var index = 0;
if ((enemiesAbove &gt; 0) &amp;&amp; (enemiesBelow &gt; 0)) { 
    index = 6;
    if (enemiesAt &gt; 0) {
        index = 7;
    }
}
else {
    if (enemiesAbove &gt; 0) {
        index = 2;
        if (enemiesAt &gt; 0) {
            index = 4;
        }
    }
    else if (enemiesBelow &gt; 0) {
        index = 3;
        if (enemiesAt &gt; 0) {
            index = 5;
        }
    }
    else if (enemiesAt &gt; 0) {
        index = 1
    }
}
draw_sprite(spr_radar,index,wv/2,hv-32);
draw_set_valign(fa_center);
draw_set_halign(fa_middle);
draw_set_colour(white);
draw_text((wv/2)+1,hv-50,enemiesAbove);
draw_text((wv/2)+1,hv-33,enemiesAt);
draw_text((wv/2)+1,hv-14,enemiesBelow);
draw_set_colour(white);
/*********** Score **********/
draw_set_font(global.scoreFont);
draw_set_valign(fa_bottom);
draw_set_halign(fa_left);
scoreDisplay = var_wipe(scoreDisplay,score,100,0,7);
draw_text_transformed_colour(0,hv,scoreDisplay,2,2,0,white,white,white,white,1);
/*********** Kill Display **********/
if (global.kill-killDisplay &gt; 0) {
    if (killAnimation++ == 34) {
        killDisplay++;
        killAnimation = 0;
        if (killDisplay mod 15 == 0) {
            if (instance_number(obj_ally) &lt; ALLY_LIMIT) {
                var a = instance_create(0,0,obj_ally);
                a.allyID = instance_number(obj_ally);
            }
        }
    }
}
else if (global.kill-killDisplay &lt; 0) {
    if (killAnimation-- == 0) {
        killDisplay--;
        killAnimation = 34;
        score += 250;
    }
}
draw_sprite(spr_kill_animation,killAnimation,(killDisplay mod 15) * 16, (killDisplay div 15) * 16);
for (var i = 0; i &lt; killDisplay; i++) {
    draw_sprite(spr_kill_animation,34,(i mod 15) * 16, (i div 15) * 16);
}
/*********** Ally Health **********/
for (var i = 0; i &lt; ALLY_LIMIT; i++) {
    if (instance_find(obj_ally,i) == noone) {
        allyHealthBarMove[i] = 0;
        allyHealthDisplay[i] = 0;
    }
}
for (var i = 0; i &lt; instance_number(obj_ally); i++) {
    var h = 24;
    var w = 128;
    var border = 2;
    var yy = ((i*15) div 15) * h;
    draw_rectangle_colour(wv-allyHealthBarMove[i],yy,wv-allyHealthBarMove[i]+w,yy+h,0,0,0,0,false);
    draw_rectangle_colour(wv-allyHealthBarMove[i]+border,yy+border,wv-allyHealthBarMove[i]+w-border,yy+h-border,$999999,$999999,$999999,$999999,false);
    draw_sprite(spr_player,14,wv-allyHealthBarMove[i]+10,yy+h/2);
    
    var o = instance_find(obj_ally,i);
    if (o.hp &lt;= 0) {
        draw_sprite(spr_ally_destroyed,0,wv-allyHealthBarMove[i],yy);
    }
    else {
        if (allyHealthBarMove[i] &lt; 128) {
            allyHealthBarMove[i] += 4;
        }
    }
    allyHealthDisplay[i] = var_wipe(allyHealthDisplay[i],max(0,o.hp/o.maxHP)*(w-6-30),100,0,0.2);
    draw_rectangle_colour(wv-allyHealthBarMove[i]+30,yy+border+4,wv-allyHealthBarMove[i]+30+(allyHealthDisplay[i]),yy+h-border-4,green,green,green,green,false);
}
/*********** Onscreen debug **********/
draw_set_valign(fa_top);
draw_set_halign(fa_right);
draw_text_colour(wv,0,string(fps)+"#"+string(alarm[0] div 60)+"#"+string(alarm[1] div 60),white,white,white,white,1);
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
